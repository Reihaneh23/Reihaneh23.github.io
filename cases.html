<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Case Details | MedCaseShare</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav>
        <div class="logo">MedCaseShare</div>
        <ul>
            <li><a href="index.html">‚Üê Back to Cases</a></li>
        </ul>
    </nav>

    <main class="case-details">
        <h1 id="caseTitle">Loading case...</h1>
        <div id="caseContent">
            <p id="caseDescription"></p>
            <small id="caseDate"></small>
        </div>
    </main>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script>
        // Initialize Firebase (same config as index.html)
        const firebaseConfig = {
            apiKey: "AIzaSyAEiK7_TLPLr6mOgLD0Sd-ULHO-DC7q9pg",
            authDomain: "medussion.firebaseapp.com",
            databaseURL: "https://medussion-default-rtdb.firebaseio.com",
            projectId: "medussion",
            storageBucket: "medussion.appspot.com",
            messagingSenderId: "734202700211",
            appId: "1:734202700211:web:11065e5e65965b1782abc6"
        };
        firebase.initializeApp(firebaseConfig);

        // Load case details
        const urlParams = new URLSearchParams(window.location.search);
        const caseId = urlParams.get('id');
        
        if (caseId) {
            firebase.database().ref(`cases/${caseId}`).once('value')
                .then(snapshot => {
                    const caseData = snapshot.val();
                    if (caseData) {
                        document.getElementById('caseTitle').textContent = caseData.title;
                        document.getElementById('caseDescription').textContent = caseData.description;
                        document.getElementById('caseDate').textContent = new Date(caseData.timestamp).toLocaleString();
                    } else {
                        document.getElementById('caseContent').innerHTML = '<p>Case not found</p>';
                    }
                })
                .catch(error => {
                    console.error("Error loading case:", error);
                    document.getElementById('caseContent').innerHTML = '<p>Error loading case details</p>';
                });
        }
    </script>
</body>
</html>
